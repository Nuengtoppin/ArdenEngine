**Document Status:** üî¨ Review  
**Version:** 0.1.0  
**Maintainer:** Nuengtoppin  
**Reviewed by:** ‚Äî  
**Last update:** 2025-11-16

---

# **1.0. –û–±–∑–æ—Ä / mini-README —Ä–∞–∑–¥–µ–ª–∞ Rotation**

–†–∞–∑–¥–µ–ª **Rotation** –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –≤–æ–∫—Å–µ–ª—å–Ω–æ-—Ç–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
(—Å–º. –¥–æ–∫—É–º–µ–Ω—Ç—ã *Topology* –∏ *Routing*) –º–æ–∂–µ—Ç **–ø–µ—Ä–µ–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤–æ –≤—Ä–∞—â–µ–Ω–∏–∏**,
–Ω–µ –Ω–∞—Ä—É—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –∞–¥—Ä–µ—Å–∞—Ü–∏—é.

Rotation ‚Äî —ç—Ç–æ —Å–ª–æ–π **–¥–∏—Å–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–≤–æ—Ä–æ—Ç–æ–≤** (0¬∞ / 90¬∞ / 180¬∞ / 270¬∞) –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y,
–∫–æ—Ç–æ—Ä—ã–π –∑–∞–¥–∞—ë—Ç –µ–¥–∏–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è:

* –ø–æ–≤–æ—Ä–æ—Ç–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç `XYZ` (world-space),
* –ø–æ–≤–æ—Ä–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —É—Ä–æ–≤–Ω–µ–π —Ç–æ–ø–æ–ª–æ–≥–∏–∏
  *(Region-local, Block/Chunk/Octo/Voxel)*,
* –ø–æ–≤–æ—Ä–æ—Ç–∞ **Route** –∫–∞–∫ —Ü–µ–ª–æ–≥–æ –∞–¥—Ä–µ—Å–Ω–æ–≥–æ –ø—É—Ç–∏,
* –ø–æ–≤–æ—Ä–æ—Ç–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (Dir6/Dir26, Octant),
* –ø–æ–≤–æ—Ä–æ—Ç–∞ –ø–ª–æ—Å–∫–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ Morton-–∫–æ–¥–∞.

–¶–µ–ª—å Rotation ‚Äî –Ω–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –≥–µ–æ–º–µ—Ç—Ä–∏—é,
–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ:

> **‚Äú—Ç–æ—Ç –∂–µ —Å–∞–º—ã–π –º–∏—Ä, —Ç–µ –∂–µ —Å–∞–º—ã–µ –∞–¥—Ä–µ—Å–∞ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
> –º–æ–∂–Ω–æ –ø–æ–≤–µ—Ä–Ω—É—Ç—å, –Ω–µ –ø–æ—Ç–µ—Ä—è–≤ –∏—Ö —Å–º—ã—Å–ª –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É‚Äù.**

Rotation –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞:

* –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É –æ—Å–µ–π `x | z | y` –∏ –∏–µ—Ä–∞—Ä—Ö–∏—é —É—Ä–æ–≤–Ω–µ–π
  *(—Å–º. Topology)*;
* –º–æ–¥–µ–ª—å –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –∞–¥—Ä–µ—Å–æ–≤ Route
  *(—Å–º. Routing)*.

---

## **1.1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–ª–æ—è Rotation**

Rotation –≤–≤–æ–¥–∏—Ç –µ–¥–∏–Ω—ã–π, —Å—Ç—Ä–æ–≥–∏–π –∏ –æ–±—Ä–∞—Ç–∏–º—ã–π –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–∏–ª –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ä–æ—Ç–∞—Ü–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ:

* –∫–∞–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å **–≥–ª–æ–±–∞–ª—å–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä–∞** (signed XYZ);
* –∫–∞–∫ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å **–ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã** —É—Ä–æ–≤–Ω–µ–π:

  * Region-local –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞,
  * Block / Chunk / Octochunk / Voxel;
* –∫–∞–∫ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å **Route** (–∞–¥—Ä–µ—Å) –∏ –ø—Ä–∏ —ç—Ç–æ–º
  –Ω–µ –ª–æ–º–∞—Ç—å –µ–≥–æ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã;
* –∫–∞–∫ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å **–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:

  * –∑–Ω–∞–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å –æ–∫—Ç–∞–Ω—Ç–æ–≤ A‚ÄìI,
  * –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è Dir6/Dir26;
* –∫–∞–∫ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å **–∏–Ω–¥–µ–∫—Å—ã**:

  * flat index (–ª–∏–Ω–µ–π–Ω–∞—è –ø–∞–º—è—Ç—å),
  * Morton-–∏–Ω–¥–µ–∫—Å (Z-order, SVO/LOD).

–°–ª–æ–π Rotation –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã:

* –≤—Å–µ –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è, —Ä–µ–¥–∞–∫—Ç–æ—Ä, DTO/HAOS, LOD/SVO, —Ä–µ–Ω–¥–µ—Ä)
  –ø–æ–Ω–∏–º–∞–ª–∏ –ø–æ–≤–æ—Ä–æ—Ç—ã **–æ–¥–∏–Ω–∞–∫–æ–≤–æ**;
* –º–æ–∂–Ω–æ –±—ã–ª–æ —Å—Ç—Ä–æ–∏—Ç—å:

  * —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏,
  * –ø–æ–≤–æ—Ä–æ—Ç–Ω—ã–µ –±–ª—é–ø—Ä–∏–Ω—Ç—ã,
  * DYN-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ ‚Äú–ø–ª–∞–≤–∞—é—â–∏–µ –∫—É—Å–∫–∏ –º–∏—Ä–∞‚Äù,
  * –ø–æ–≤–æ—Ä–æ—Ç–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ;
* –ª—é–±—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Äú–ø–æ–≤–µ—Ä–Ω—É—Ç—å –æ–±—ä–µ–∫—Ç / –æ–±–ª–∞—Å—Ç—å / —à–∞–±–ª–æ–Ω‚Äù
  –æ–ø–∏—Ä–∞–ª–∏—Å—å –Ω–∞ –æ–¥–Ω—É –∏ —Ç—É –∂–µ –º–∞—Ç–µ–º–∞—Ç–∏–∫—É –∏ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã.

---

[üìö –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥](./README.md)

[üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–æ—Ä—Ç–∞–ª –ø—Ä–æ–µ–∫—Ç–∞](../../ARCHITECTURE/readme.md)  


## **1.2. –û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**

Rotation –Ω–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≥–µ–π–º–ø–ª–µ–π –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ñ–∏–∑–∏–∫—É.
–û–Ω –∑–∞–¥–∞—ë—Ç **–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç** –¥–ª—è –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ–≤–æ—Ä–æ—Ç—ã.

–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

* **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –±–ª—é–ø—Ä–∏–Ω—Ç—ã**

  * –ø–æ–≤–æ—Ä–æ—Ç –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä (–¥–æ–º, –∫–æ–º–Ω–∞—Ç–∞, –º–æ—Å—Ç);
  * —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–µ –≤–∞—Ä–∏–∞—Ü–∏–∏: 4 –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ —à–∞–±–ª–æ–Ω–∞;
  * –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –º–∏—Ä–∞ (—Å–µ–≤–µ—Ä/—é–≥/–≤–æ—Å—Ç–æ–∫/–∑–∞–ø–∞–¥).

* **DYN-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∏–≥—É—Ä—ã** *(–±—É–¥—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å)*

  * –ø–æ–≤–æ—Ä–æ—Ç —Ü–µ–ª–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ñ–∏–≥—É—Ä–æ–π;
  * –ø–µ—Ä–µ–Ω–æ—Å —Ñ–∏–≥—É—Ä –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è–º–∏ –º–∏—Ä–∞;
  * –µ–¥–∏–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ ‚Äú–ª–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞ ‚Üî –º–∏—Ä–æ–≤–æ–π Route‚Äù.

* **LOD/SVO –∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**

  * –ø–æ–≤–æ—Ä–æ—Ç —É—Ä–æ–≤–Ω–µ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è Morton-–ª–æ–≥–∏–∫–∏;
  * —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è –∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫—ç—à–∏.

* **DTO/HAOS –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é**

  * –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –æ–±–ª–∞—Å—Ç–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏/–Ω–∞–±–ª—é–¥–µ–Ω–∏—è;
  * –ø–æ–≤–æ—Ä–æ—Ç ‚Äú–æ–∫–æ–Ω‚Äù —Å–∏–º—É–ª—è—Ü–∏–∏ –≤–æ–∫—Ä—É–≥ –∏–≥—Ä–æ–∫–∞/–∫–∞–º–µ—Ä—ã.

* **–†–µ–¥–∞–∫—Ç–æ—Ä –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**

  * –ø–æ–≤–æ—Ä–æ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–π (Chunk/Octo/Voxel-–æ–±–ª–∞—Å—Ç–∏);
  * –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ/–≤—Å—Ç–∞–≤–∫–∞ —Å –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–µ–π;
  * –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π.

* **–†–µ–Ω–¥–µ—Ä –∏ –±—É—Ñ–µ—Ä—ã**

  * –ø–µ—Ä–µ–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ GPU-–±—É—Ñ–µ—Ä–∞—Ö —á–µ—Ä–µ–∑ flat/Morton-–∏–Ω–¥–µ–∫—Å—ã;
  * –ø–æ–≤–æ—Ä–æ—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö –≤–æ–∫—Å–µ–ª—å–Ω—ã—Ö –º–µ—à–µ–π –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π —Ç–æ–ø–æ–ª–æ–≥–∏–∏.

---

## **1.3. –¶–µ–ª–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Rotation**

Rotation —Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –∏ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–µ–Ω,
—á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è —Å—Ç–∞–±–∏–ª—å–Ω—ã–º —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–º –¥–ª—è –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Å–∏—Å—Ç–µ–º.

### **1.3.1. –¶–µ–ª–∏**

* –û–±–µ—Å–ø–µ—á–∏—Ç—å **—Å—Ç—Ä–æ–≥—É—é, –¥–∏—Å–∫—Ä–µ—Ç–Ω—É—é** –º–æ–¥–µ–ª—å –ø–æ–≤–æ—Ä–æ—Ç–æ–≤ –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y:

  ```
  { R0, R90, R180, R270 }
  ```

* –°–¥–µ–ª–∞—Ç—å –ø–æ–≤–æ—Ä–æ—Ç:

  * **–æ–±—Ä–∞—Ç–∏–º—ã–º**:
    `rot(rot(X, 90¬∞), 270¬∞) == X`;
  * **—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º —Å —Ç–æ–ø–æ–ª–æ–≥–∏–µ–π**:
    –≤—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ —Å–≤–æ–∏—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–∞—Ö;
  * **—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º —Å Routing**:
    Route –ø–æ—Å–ª–µ —Ä–æ—Ç–∞—Ü–∏–∏ –æ—Å—Ç–∞—ë—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º –∞–¥—Ä–µ—Å–æ–º.

* –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å **–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–π**:

  * –≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö),
  * –≤—Ä–∞—â–µ–Ω–∏–µ Route,
  * –≤—Ä–∞—â–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (Octant, Dir6),
  * –≤—Ä–∞—â–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ (flat, Morton),
  * –≤—Ä–∞—â–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫—É–±–æ–≤ (VoxelRange / ChunkRange).

* –ó–∞–ª–æ–∂–∏—Ç—å –æ—Å–Ω–æ–≤—É –¥–ª—è:

  * DYN-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–ª–æ–∫–∞–ª—å–Ω—ã–µ –º–∏—Ä—ã, –≤—Ä–∞—â–∞–µ–º—ã–µ —Ü–µ–ª–∏–∫–æ–º),
  * –ø–æ–≤–æ—Ä–æ—Ç–Ω—ã—Ö –±–ª—é–ø—Ä–∏–Ω—Ç–æ–≤,
  * —Å–∏–º–º–µ—Ç—Ä–∏–π –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è—Ö.

---

### **1.3.2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ç–æ, —á–µ–≥–æ –∑–¥–µ—Å—å –Ω–µ—Ç**

–í —Ä–∞–º–∫–∞—Ö –¥–∞–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ **Rotation**:

* –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ç–æ–ª—å–∫–æ –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–≤–æ—Ä–æ—Ç—ã –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y**
  (0¬∞ / 90¬∞ / 180¬∞ / 270¬∞);
* –Ω–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö 3D-—Ä–æ—Ç–∞—Ü–∏–π (–∫–≤–∞—Ç–µ—Ä–Ω–∏–æ–Ω—ã, pitch/roll);
* –Ω–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç:

  * —Å–∞–º–∏ DYN-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã,
  * –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –º–æ–¥–µ–ª–∏,
  * –∏–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏.

Rotation —Å—á–∏—Ç–∞–µ—Ç—Å—è:

> **–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –±–∞–∑–æ–π**
> –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç —á—Ç–æ-—Ç–æ –ø–æ–≤–µ—Ä–Ω—É—Ç—å
> –≤ —Ä–∞–º–∫–∞—Ö —É–∂–µ –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–æ–ø–æ–ª–æ–≥–∏–∏ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏.

---


# **2. –ú–æ–¥–µ–ª—å –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ–π —Ä–æ—Ç–∞—Ü–∏–∏**

–†–∞–∑–¥–µ–ª 2 —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç **–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫—É—é –º–æ–¥–µ–ª—å –ø–æ–≤–æ—Ä–æ—Ç–æ–≤**, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥—É—Ç —Å—Ç—Ä–æ–∏—Ç—å—Å—è –≤—Å–µ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Ä–æ—Ç–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, Route, –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤).

Rotation —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ –¥–∏—Å–∫—Ä–µ—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞ –ø–æ–≤–æ—Ä–æ—Ç–æ–≤ –≤–æ–∫—Ä—É–≥ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Å–∏ **Y**, –¥–µ–π—Å—Ç–≤—É—é—â–∞—è:

* –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã `XYZ`,
* –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —É—Ä–æ–≤–Ω–µ–π —Ç–æ–ø–æ–ª–æ–≥–∏–∏,
* –Ω–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Octant, Dir6),
* –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –≤–µ–ª–∏—á–∏–Ω—ã (–∏–Ω–¥–µ–∫—Å—ã, –¥–∏–∞–ø–∞–∑–æ–Ω—ã).

---

## **2.1. –ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π –Ω–∞–±–æ—Ä –ø–æ–≤–æ—Ä–æ—Ç–æ–≤ (–≥—Ä—É–ø–ø–∞ C4)**

–°–ª–æ–π Rotation –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω–µ—á–Ω–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–≤–æ—Ä–æ—Ç–æ–≤ –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y:

```text
R0   =  0¬∞
R90  =  90¬∞
R180 = 180¬∞
R270 = 270¬∞
```

–î–∞–ª—å–Ω–µ–π—à–∏–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è:

```text
Rot = { R0, R90, R180, R270 }
```

–≠—Ç–∏ –ø–æ–≤–æ—Ä–æ—Ç—ã –æ–±—Ä–∞–∑—É—é—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫—É—é –≥—Ä—É–ø–ø—É –ø–æ—Ä—è–¥–∫–∞ 4 (**C4**) —Å –æ–ø–µ—Ä–∞—Ü–∏–µ–π –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏:

```text
R0   * Œ∏  = Œ∏
R90  * R90  = R180
R90  * R180 = R270
R90  * R270 = R0

R180 * R180 = R0
R270 * R90  = R0
...
```

–°–≤–æ–π—Å—Ç–≤–∞:

* **–ê—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**: `(a * b) * c = a * (b * c)` –¥–ª—è –ª—é–±—ã—Ö `a,b,c ‚àà Rot`.
* **–¢–æ–∂–¥–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç**: `R0` ‚Äî –Ω–µ –º–µ–Ω—è–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç.
* **–û–±—Ä–∞—Ç–∏–º—ã–π —ç–ª–µ–º–µ–Ω—Ç**: –¥–ª—è –∫–∞–∂–¥–æ–≥–æ `Œ∏ ‚àà Rot` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç `Œ∏‚Åª¬π ‚àà Rot`, —Ç–∞–∫–æ–π —á—Ç–æ:

  ```text
  Œ∏ * Œ∏‚Åª¬π = R0
  ```

  –ù–∞–ø—Ä–∏–º–µ—Ä:

  * `(R90)‚Åª¬π = R270`
  * `(R270)‚Åª¬π = R90`
  * `(R180)‚Åª¬π = R180`

–≠—Ç–∞ –≥—Ä—É–ø–ø–∞ C4 —è–≤–ª—è–µ—Ç—Å—è **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –ø–æ–≤–æ—Ä–æ—Ç–æ–≤** –≤ –¥–∞–Ω–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ.
–õ—é–±–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è Rotation –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω –∏–∑ —á–µ—Ç—ã—Ä—ë—Ö —É–≥–ª–æ–≤ `{R0, R90, R180, R270}`.

---

## **2.2. –û—Å—å Y –∏ –ø–ª–æ—Å–∫–æ—Å—Ç—å XZ**

–†–æ—Ç–∞—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è **—Å—Ç—Ä–æ–≥–æ –≤–æ–∫—Ä—É–≥ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Å–∏ Y**.

* –û—Å—å **Y** –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω–æ–π (–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–∞—è –æ—Å—å).
* –ü–æ–≤–æ—Ä–æ—Ç—É –ø–æ–¥–≤–µ—Ä–≥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ **–ø–ª–æ—Å–∫–æ—Å—Ç—å XZ**.

–≠—Ç–æ —Å–æ–≥–ª–∞—Å—É–µ—Ç—Å—è —Å:

* –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–º –ø–æ—Ä—è–¥–∫–æ–º –æ—Å–µ–π `x | z | y` (—Å–º. Topology);
* –º–æ–¥–µ–ª—å—é, –≥–¥–µ XZ ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—á–∞—è –ø–ª–æ—Å–∫–æ—Å—Ç—å —Ç–µ—Ä—Ä–µ–π–Ω–∞,
  –∞ Y ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–ª–æ–π/–≤—ã—Å–æ—Ç–∞.

### 2.2.1. –ü–æ–≤–æ—Ä–æ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ (XYZ)

–ü—É—Å—Ç—å –µ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π –≤–µ–∫—Ç–æ—Ä:

```text
P = (X, Z, Y)
```

–î–ª—è –∫–∞–∂–¥–æ–≥–æ Œ∏ ‚àà {R0, R90, R180, R270} –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:

* **R0 (0¬∞)**

  ```text
  (X', Z', Y') = (X, Z, Y)
  ```

* **R90 (90¬∞ –≤–æ–∫—Ä—É–≥ Y)**

  ```text
  (X', Z', Y') = ( Z, -X, Y )
  ```

* **R180 (180¬∞)**

  ```text
  (X', Z', Y') = ( -X, -Z, Y )
  ```

* **R270 (270¬∞)**

  ```text
  (X', Z', Y') = ( -Z, X, Y )
  ```

–°–≤–æ–π—Å—Ç–≤–∞:

* –∫–æ–º–ø–æ–Ω–µ–Ω—Ç **Y** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π;
* `|P|` –ø–æ XZ-–ø—Ä–æ–µ–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è (–ø–æ–≤–æ—Ä–æ—Ç ‚Äî –æ—Ä—Ç–æ–≥–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ);
* –∑–Ω–∞–∫–∏ X/Z –º–µ–Ω—è—é—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø–æ–≤–æ—Ä–æ—Ç–∞.

–≠—Ç–∏ —Ñ–æ—Ä–º—É–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è:

* –ø—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö signed-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç;
* –∫–∞–∫ –æ—Å–Ω–æ–≤–∞ –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π;
* –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º ‚Äî –ø—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏ Route –∏ –∏–Ω–¥–µ–∫—Å–æ–≤.

---

## **2.3. –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã Rotation**

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ Rotation –ø–æ–¥—á–∏–Ω—è—é—Ç—Å—è –æ–±—â–µ–º—É –Ω–∞–±–æ—Ä—É –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.

### **2.3.1. –û–±—Ä–∞—Ç–∏–º–æ—Å—Ç—å**

–î–ª—è –ª—é–±–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ `T` (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞, Route, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –∏–Ω–¥–µ–∫—Å) –∏ –ª—é–±–æ–≥–æ —É–≥–ª–∞ `Œ∏`:

```text
rot(rot(T, Œ∏), Œ∏‚Åª¬π) == T
```

–≥–¥–µ `Œ∏‚Åª¬π` ‚Äî –æ–±—Ä–∞—Ç–Ω—ã–π —É–≥–æ–ª –∏–∑ `{R0, R90, R180, R270}`.

–≠—Ç–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ:

* –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö XYZ-–≤–µ–∫—Ç–æ—Ä–æ–≤;
* –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (Voxel/Octo/Chunk/Block/Region-local);
* –¥–ª—è Route;
* –¥–ª—è Flat/Morton-–∏–Ω–¥–µ–∫—Å–æ–≤;
* –¥–ª—è –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤/–ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫—É–±–æ–≤.

### **2.3.2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É**

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è Rotation –∫ –ª–æ–∫–∞–ª—å–Ω—ã–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º —É—Ä–æ–≤–Ω—è:

* —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ –¥–æ–ø—É—Å—Ç–∏–º–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ —É—Ä–æ–≤–Ω—è;
* —ç–ª–µ–º–µ–Ω—Ç –æ—Å—Ç–∞—ë—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ç–æ–≥–æ –∂–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
  (–æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ VoxelRange/Chunk/Block/Region).

–î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:

```text
rot(coord_local, Œ∏) ‚àà [0..size_x-1] √ó [0..size_z-1] √ó [0..size_y-1]
```

–¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

* –≤—Ä–∞—â–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –Ω–µ –º–µ–Ω—è—è –µ–≥–æ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏;
* –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –±—É—Ñ–µ—Ä—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö.

### **2.3.3. –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å Topology / Routing**

Rotation –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –∏–∑–º–µ–Ω—è—Ç—å:

* —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–µ—Ä–∞—Ä—Ö–∏–∏ `Region ‚Üí Block ‚Üí Chunk ‚Üí Octochunk ‚Üí Voxel`;
* –ø–æ—Ä—è–¥–æ–∫ —É—Ä–æ–≤–Ω–µ–π –≤ Route;
* –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∏–Ω–¥–µ–∫—Å–æ–≤ –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è.

Rotation:

* –ø–µ—Ä–µ–æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ –∏–Ω–¥–µ–∫—Å—ã –≤–Ω—É—Ç—Ä–∏ —É–∂–µ –∑–∞–¥–∞–Ω–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤;
* –ø—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏ Route –æ–±—è–∑–∞–Ω —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –µ–≥–æ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å:

  * Region –æ—Å—Ç–∞—ë—Ç—Å—è Region,
  * Block –æ—Å—Ç–∞—ë—Ç—Å—è Block –∏ —Ç.–¥.;
* –Ω–µ –º–µ–Ω—è–µ—Ç –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã, –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö Topology –∏ Routing.

### **2.3.4. –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –Ω–æ—Å–∏—Ç–µ–ª—è –¥–∞–Ω–Ω—ã—Ö**

–û–ø–µ—Ä–∞—Ü–∏–∏ Rotation –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è:

* –Ω–∞ —É—Ä–æ–≤–Ω–µ **–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ –∏–Ω–¥–µ–∫—Å–æ–≤**,
* –∞ –Ω–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

–¢–æ –µ—Å—Ç—å:

* Rotation –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–∏ –¥–∞–Ω–Ω—ã–µ:

  * –≤ CPU-–º–∞—Å—Å–∏–≤–µ,
  * –≤ GPU-–±—É—Ñ–µ—Ä–µ,
  * –≤ SVO-—Å—Ç—Ä—É–∫—Ç—É—Ä–µ,
  * –≤ ECS-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö;
* –æ–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ **–∫–∞–∫ –¥–æ–ª–∂–Ω—ã –º–µ–Ω—è—Ç—å—Å—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ –∏–Ω–¥–µ–∫—Å—ã**,
  –∞ –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ ‚Äî –∑–∞–¥–∞—á–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

# **3. –†–æ—Ç–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç**

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–≤–æ—Ä–æ—Ç—ã `R0/R90/R180/R270` –¥–µ–π—Å—Ç–≤—É—é—Ç:

* –Ω–∞ **–≥–ª–æ–±–∞–ª—å–Ω—ã–µ signed-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã** –º–∏—Ä–∞ (world-space XYZ),
* –Ω–∞ **–ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã** —É—Ä–æ–≤–Ω–µ–π —Ç–æ–ø–æ–ª–æ–≥–∏–∏
  *(Region-local, Block, Chunk, Octochunk, Voxel)*,
* –Ω–∞ **–ª–æ–∫–∞–ª—å–Ω—ã–µ float-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã** –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–ó–¥–µ—Å—å Rotation —Ä–∞–±–æ—Ç–∞–µ—Ç **—á–∏—Å—Ç–æ —Å —á–∏—Å–ª–∞–º–∏**, –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º –¥–∞–Ω–Ω—ã—Ö.

---

## **3.1. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ signed-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (world-space)**

–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ–ø–∏—Å—ã–≤–∞—é—Ç –ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –º–∏—Ä–æ–≤–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏:

```text
P = (X_abs, Z_abs, Y_abs),  X_abs, Z_abs, Y_abs ‚àà ‚Ñ§
```

–ü–æ–≤–æ—Ä–æ—Ç –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y –¥–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç—å XZ,
Y –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω–æ–π (—Å–º. 2.2).

### **3.1.1. –§–æ—Ä–º—É–ª—ã –ø–æ–≤–æ—Ä–æ—Ç–∞**

–î–ª—è –ª—é–±–æ–≥–æ `P = (X, Z, Y)` –∏ `Œ∏ ‚àà {R0,R90,R180,R270}`:

* **R0 (0¬∞)** ‚Äî —Ç–æ–∂–¥–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:

  ```text
  rot_world(P, R0) = ( X,  Z,  Y )
  ```

* **R90 (90¬∞ –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y –ø–æ —á–∞—Å–æ–≤–æ–π)**:

  ```text
  rot_world(P, R90) = (  Z, -X,  Y )
  ```

* **R180 (180¬∞)**:

  ```text
  rot_world(P, R180) = ( -X, -Z,  Y )
  ```

* **R270 (270¬∞)**:

  ```text
  rot_world(P, R270) = ( -Z,  X,  Y )
  ```

–°–≤–æ–π—Å—Ç–≤–∞:

* `Y` –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.
* –î–ª–∏–Ω–∞ –≤–µ–∫—Ç–æ—Ä–∞ –≤ XZ-–ø—Ä–æ–µ–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.
* –ü–æ–≤–æ—Ä–æ—Ç **–æ–±—Ä–∞—Ç–∏–º**:

  ```text
  rot_world(rot_world(P, Œ∏), Œ∏‚Åª¬π) = P
  ```

–≠—Ç–∏ –∂–µ —Ñ–æ—Ä–º—É–ª—ã –ø—Ä–∏–º–µ–Ω–∏–º—ã –∏ –∫ **float-–≤–µ–∫—Ç–æ—Ä–∞–º**:

```text
(X, Z, Y) ‚àà ‚Ñù¬≥
```

–∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è:

* —Ñ–∏–∑–∏–∫–æ–π,
* –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π,
* –∫–∞–º–µ—Ä–∞–º–∏,
* raycast –∏ —Ç.–ø.

---

## **3.2. –õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —É—Ä–æ–≤–Ω–µ–π —Ç–æ–ø–æ–ª–æ–≥–∏–∏**

–õ–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–æ–ø–æ–ª–æ–≥–∏–∏ (—Å–º. Topology) ‚Äî –≤—Å–µ–≥–¥–∞ **–Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã**:

```text
vx, vz, vy ‚â• 0
ox, oz, oy ‚â• 0
cx, cz, cy ‚â• 0
...
```

–û–Ω–∏ –∂–∏–≤—É—Ç –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞:

* Voxel –≤–Ω—É—Ç—Ä–∏ Octochunk,
* Octochunk –≤–Ω—É—Ç—Ä–∏ Chunk,
* Chunk –≤–Ω—É—Ç—Ä–∏ Block –∏ —Ç.–¥.

Rotation –¥–æ–ª–∂–µ–Ω:

* –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã **–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**,
* –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ `[0..size-1]`,
* –Ω–µ –º–µ–Ω—è—Ç—å —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

### **3.2.1. –û–±—â–∞—è –º–æ–¥–µ–ª—å –¥–ª—è XZ-–ø–ª–æ—Å–∫–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**

–ü—É—Å—Ç—å –µ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏:

```text
size_x = size_z = N
size_y = H      // –≤—ã—Å–æ—Ç–∞ —É—Ä–æ–≤–Ω—è (–º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è)
```

–∏ –ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–∞:

```text
p = (x, z, y),  0 ‚â§ x < N,  0 ‚â§ z < N,  0 ‚â§ y < H
```

–¢–æ–≥–¥–∞ –ø–æ–≤–æ—Ä–æ—Ç –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º—É–ª–∞–º–∏:

* **R0 (0¬∞)**

  ```text
  x' = x
  z' = z
  y' = y
  ```

* **R90 (90¬∞)**

  ```text
  x' = z
  z' = N - 1 - x
  y' = y
  ```

* **R180 (180¬∞)**

  ```text
  x' = N - 1 - x
  z' = N - 1 - z
  y' = y
  ```

* **R270 (270¬∞)**

  ```text
  x' = N - 1 - z
  z' = x
  y' = y
  ```

–°–≤–æ–π—Å—Ç–≤–∞:

* `(x',z')` –≤—Å–µ–≥–¥–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ `[0..N-1] √ó [0..N-1]`;
* `y'` –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è;
* –µ—Å–ª–∏ —Å—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π –º–∞—Ç—Ä–∏—Ü–µ–π XZ,
  —Ç–æ —ç—Ç–æ –æ–±—ã—á–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç –º–∞—Ç—Ä–∏—Ü—ã –Ω–∞ 0/90/180/270¬∞.

–≠—Ç–∞ —Ñ–æ—Ä–º—É–ª–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **–Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö**,
–≥–¥–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–º–µ–µ—Ç –∫—É–±–∏—á–µ—Å–∫—É—é/–∫–≤–∞–¥—Ä–∞—Ç–Ω—É—é XZ-—Å–µ—Ç–∫—É:

* Voxel-—Å–µ—Ç–∫–∞ –≤–Ω—É—Ç—Ä–∏ Octochunk (N = 32 –∏–ª–∏ 64 –∏ —Ç.–ø.),
* Octochunk –≤–Ω—É—Ç—Ä–∏ Chunk (N = 2),
* Chunk –≤–Ω—É—Ç—Ä–∏ Block (N = 8),
* Block –≤–Ω—É—Ç—Ä–∏ Region (N = 8 –ø–æ XZ, –æ—Ç–¥–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ Y).

---

### **3.2.2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —É—Ä–æ–≤–Ω—è–º**

–î–ª—è –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (—Å–º. Topology/1.2):

* **Voxel** –≤–Ω—É—Ç—Ä–∏ Octochunk:

  ```text
  N = OCTO_SIZE   // 32 (–∫–∞–Ω–æ–Ω)
  (vx', vz', vy') = rot_local(vx, vz, vy, Œ∏; N)
  ```

* **Octochunk** –≤–Ω—É—Ç—Ä–∏ Chunk:

  ```text
  N = 2           // 2√ó2√ó2 Octochunks
  (ox', oz', oy') = rot_local(ox, oz, oy, Œ∏; N)
  ```

* **Chunk** –≤–Ω—É—Ç—Ä–∏ Block:

  ```text
  N = 8           // 8√ó8√ó8 Chunks
  (cx', cz', cy') = rot_local(cx, cz, cy, Œ∏; N)
  ```

* **Block** –≤–Ω—É—Ç—Ä–∏ Region –ø–æ XZ:

  ```text
  N = 8           // 8√ó8√ó2 Blocks
  (bx', bz')      = rot_local_xz(bx, bz, Œ∏; N)
  by'             = by  // –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –±–ª–æ–∫–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
  ```

–í—ã—Å–æ—Ç–∞ (`vy/oy/cy/by`) –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –≤—Ä–∞—â–µ–Ω–∏–∏ –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y.

---

### **3.2.3. –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–æ—Ç–∞—Ü–∏–∏**

–î–ª—è –ª—é–±–æ–≥–æ —É—Ä–æ–≤–Ω—è –∏ –ª—é–±–æ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:

```text
p = (x,z,y)
p' = rot_local(p, Œ∏; N)
```

–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è:

1. **–ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É**

   ```text
   0 ‚â§ x' < N
   0 ‚â§ z' < N
   0 ‚â§ y' < H   // —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –ø–æ –≤—ã—Å–æ—Ç–µ
   ```

2. **–û–±—Ä–∞—Ç–∏–º–æ—Å—Ç—å**

   ```text
   rot_local(rot_local(p, Œ∏; N), Œ∏‚Åª¬π; N) = p
   ```

3. **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å –ø–ª–æ—Å–∫–∏–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏**

   –ï—Å–ª–∏ flat-index —É—Ä–æ–≤–Ω—è (—Å–º. Topology/–ø–ª–æ—Å–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã) –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –∫–∞–∫:

   ```text
   idx  = x + size_x * (z + size_z * y)
   ```

   —Ç–æ –ø–æ–≤–æ—Ä–æ—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω:

   * –ª–∏–±–æ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é `(x,z,y) ‚Üí (x',z',y') ‚Üí idx'`,
   * –ª–∏–±–æ —á–µ—Ä–µ–∑ ‚Äú—Ç–∞–±–ª–∏—Ü—É —Ä–æ—Ç–∞—Ü–∏–∏ –∏–Ω–¥–µ–∫—Å–æ–≤‚Äù (precompute/lookup).

   –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö **—Å–µ–º–∞–Ω—Ç–∏–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –æ—Å—Ç–∞—ë—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π**.

---

## **3.3. –õ–æ–∫–∞–ª—å–Ω—ã–µ float-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ –∏—Ö —Å–≤—è–∑—å —Å —Ç–æ–ø–æ–ª–æ–≥–∏–µ–π**

–í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –∏–Ω–¥–µ–∫—Å–Ω—ã–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º (—Ü–µ–ª—ã–º), –º–Ω–æ–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å **–ª–æ–∫–∞–ª—å–Ω—ã–º–∏ float-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏**, –∏–∑–º–µ—Ä—è–µ–º—ã–º–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ:

* –Ω–∞—á–∞–ª–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (Chunk/Block/Region),
* –∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ origin –≤–Ω—É—Ç—Ä–∏ Route.

### **3.3.1. –õ–æ–∫–∞–ª—å–Ω—ã–π float –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ**

–ü—É—Å—Ç—å –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ:

```text
P_local = (x_f, z_f, y_f),  x_f, z_f, y_f ‚àà ‚Ñù
```

—Å –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º, —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–º —Å —Ä–∞–∑–º–µ—Ä–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```text
0.0 ‚â§ x_f < N
0.0 ‚â§ z_f < N
0.0 ‚â§ y_f < H
```

–¢–æ–≥–¥–∞ –ø–æ–≤–æ—Ä–æ—Ç –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y –¥–ª—è float-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è **—Ç–µ–º –∂–µ** –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º, —á—Ç–æ –∏ –¥–ª—è –º–∏—Ä–æ–≤–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞:

* **R0**

  ```text
  (x_f', z_f', y_f') = ( x_f,  z_f,  y_f )
  ```

* **R90**

  ```text
  (x_f', z_f', y_f') = (  z_f,  N - 1.0 - x_f,  y_f )
  ```

* **R180**

  ```text
  (x_f', z_f', y_f') = ( N - 1.0 - x_f,  N - 1.0 - z_f,  y_f )
  ```

* **R270**

  ```text
  (x_f', z_f', y_f') = ( N - 1.0 - z_f,  x_f,  y_f )
  ```

–ó–¥–µ—Å—å –º—ã —è–≤–Ω–æ —É—á–∏—Ç—ã–≤–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—ã `[0..N)` –ø–æ XZ, —á—Ç–æ–±—ã:

* float-—Ç–æ—á–∫–∞ –ø–æ—Å–ª–µ –ø–æ–≤–æ—Ä–æ—Ç–∞ –æ—Å—Ç–∞–≤–∞–ª–∞—Å—å –≤–Ω—É—Ç—Ä–∏ —Ç–æ–≥–æ –∂–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞,
* –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–æ–≤–ø–∞–¥–∞–ª–æ —Å –ø–æ–≤–æ—Ä–æ—Ç–æ–º —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤.

---

### **3.3.2. –ú–æ—Å—Ç: signed XYZ ‚Üî —Ç–æ–ø–æ–ª–æ–≥–∏—è ‚Üî Rotation**

–û–±—â–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –ø–æ–¥ —Ä–æ—Ç–∞—Ü–∏–µ–π:

1. **–ì–ª–æ–±–∞–ª—å–Ω—ã–π float-–≤–µ–∫—Ç–æ—Ä (world-space)**

   ```text
   P_world = (X_abs, Z_abs, Y_abs) ‚àà ‚Ñù¬≥
   ```

   –º–æ–∂–µ—Ç –±—ã—Ç—å:

   * –Ω–∞–ø—Ä—è–º—É—é –ø–æ–≤–µ—Ä–Ω—É—Ç: `rot_world(P_world, Œ∏)`,
   * –∏–ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ —Ç–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å (—Å–º. Topology/Routing),
     –∑–∞—Ç–µ–º Route –ø–æ–¥–≤–µ—Ä–≥–∞–µ—Ç—Å—è —Ä–æ—Ç–∞—Ü–∏–∏ –∫–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞.

2. **–¢–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å–ª–æ–π (–∏–Ω–¥–µ–∫—Å—ã)**

   –í–µ–∫—Ç–æ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–ª–æ–∂–µ–Ω –Ω–∞:

   ```text
   Region, Block, Chunk, Octochunk, Voxel, –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
   ```

   –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:

   * –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–≤–µ—Ä–Ω—É—Ç –ª–æ–∫–∞–ª—å–Ω–æ (—Å–º. 3.2),
   * –ª–∏–±–æ –≤–µ—Å—å Route –±—É–¥–µ—Ç –ø–æ–≤—ë—Ä–Ω—É—Ç –∫–∞–∫ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ (–≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö).

3. **–õ–æ–∫–∞–ª—å–Ω—ã–π float –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ**

   –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ:

   * –ø—Ä–∏–≤—è–∑–∞—Ç—å float-–≤–µ–∫—Ç–æ—Ä –∫ origin –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (Region/Chunk/DYN),
   * –ø–æ–≤–µ—Ä–Ω—É—Ç—å –µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ (—Å–º. 3.3.1),
   * –∑–∞—Ç–µ–º –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤–µ—Ä–Ω—É—Ç—å –≤ –º–∏—Ä–æ–≤–æ–µ –∏–ª–∏ —Ç–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:

> **–æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –ø–æ–≤–æ—Ä–æ—Ç—ã Œ∏ ‚àà {R0,R90,R180,R270}
> —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ –¥–µ–π—Å—Ç–≤—É—é—Ç –Ω–∞ —Ç—Ä–∏ —Å–ª–æ—è:**
>
> * –≥–ª–æ–±–∞–ª—å–Ω—ã–µ signed-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (world-space),
> * –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–æ–ø–æ–ª–æ–≥–∏–∏,
> * –ª–æ–∫–∞–ª—å–Ω—ã–µ float-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

–≠—Ç–æ —Å–æ–∑–¥–∞—ë—Ç **–µ–¥–∏–Ω—ã–π —è–∑—ã–∫ —Ä–æ—Ç–∞—Ü–∏–∏** –¥–ª—è –≤—Å–µ–≥–æ –¥–≤–∏–∂–∫–∞:
–æ—Ç —Ñ–∏–∑–∏–∫–∏ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ –±–ª—é–ø—Ä–∏–Ω—Ç–æ–≤ –∏ –±—É–¥—É—â–∏—Ö DYN-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

---

# **4. –†–æ—Ç–∞—Ü–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏ –æ–∫—Ç–∞–Ω—Ç–æ–≤**

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç, –∫–∞–∫ –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–≤–æ—Ä–æ—Ç—ã
`R0 / R90 / R180 / R270` –¥–µ–π—Å—Ç–≤—É—é—Ç –Ω–∞:

* –∑–Ω–∞–∫–æ–≤—É—é –º–æ–¥–µ–ª—å –æ–∫—Ç–∞–Ω—Ç–æ–≤ **A‚ÄìI** (—Å–º. Topology),
* –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è **Dir6** (¬±X, ¬±Z, ¬±Y),
* –∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –±–æ–ª–µ–µ –ø–ª–æ—Ç–Ω—ã–µ –Ω–∞–±–æ—Ä—ã –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π.

Rotation –Ω–µ –º–µ–Ω—è–µ—Ç —Ç–æ–ø–æ–ª–æ–≥–∏—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ ‚Äî
–æ–Ω –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç **—Ç–æ–ª—å–∫–æ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è** –≤ —É–∂–µ –∑–∞–¥–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –æ—Å–µ–π `x | z | y`.

---

## **4.1. –¢–∏–ø—ã –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ**

–í –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç—Ä–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å–ª–æ—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. **Octant (A‚ÄìI)**
   –ó–Ω–∞–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ:

   ```text
   (sx, sz, sy) ‚àà {+1, -1}¬≥
   ```

   –ó–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±—É–∫–≤–∞–º–∏:

   | –û–∫—Ç–∞–Ω—Ç | sx | sz | sy |
   | ------ | -- | -- | -- |
   | A      | +  | +  | +  |
   | B      | ‚àí  | +  | +  |
   | C      | ‚àí  | ‚àí  | +  |
   | D      | +  | ‚àí  | +  |
   | E      | +  | +  | ‚àí  |
   | F      | ‚àí  | +  | ‚àí  |
   | G      | ‚àí  | ‚àí  | ‚àí  |
   | I      | +  | ‚àí  | ‚àí  |

2. **Dir6** ‚Äî —à–µ—Å—Ç—å –æ—Å–µ–≤—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

   ```text
   +X, -X, +Z, -Z, +Y, -Y
   ```

3. **DirN / –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä–∞**
   –õ—é–±—ã–µ signed-–≤–µ–∫—Ç–æ—Ä–∞ `(dx, dz, dy)` ‚àà ‚Ñ§¬≥ / ‚Ñù¬≥,
   –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π.

Rotation –¥–æ–ª–∂–µ–Ω –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å **–æ–¥–∏–Ω–∞–∫–æ–≤–æ** –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∏—Ö —É—Ä–æ–≤–Ω—è—Ö,
–æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –æ–¥–Ω—É –∏ —Ç—É –∂–µ Y-—Ä–æ—Ç–∞—Ü–∏—é (—Å–º. 2.2 / 3.1).

---

## **4.2. –†–æ—Ç–∞—Ü–∏—è –æ–∫—Ç–∞–Ω—Ç–æ–≤ A‚ÄìI**

–û–∫—Ç–∞–Ω—Ç ‚Äî —ç—Ç–æ **–∑–Ω–∞–∫–∏ –æ—Å–µ–π**:

```text
Octant ‚Üî (sx, sz, sy),  sx, sz, sy ‚àà {+1, -1}
```

–ü–æ–≤–æ—Ä–æ—Ç –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y:

* –∏–∑–º–µ–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ X/Z –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `(sx, sz)`,
* **–Ω–µ –º–µ–Ω—è–µ—Ç** –∑–Ω–∞–∫ `sy` (–≤–µ—Ä—Ö/–Ω–∏–∑).

### **4.2.1. –û–±—â–∏–µ —Ñ–æ—Ä–º—É–ª—ã –¥–ª—è –∑–Ω–∞–∫–æ–≤**

–ë–µ—Ä—ë–º –∑–Ω–∞–∫-–≤–µ–∫—Ç–æ—Ä:

```text
S = (sx, sz) ‚àà {+1, -1}¬≤
```

–¢–æ–≥–¥–∞ –¥–ª—è –ø–æ–≤–æ—Ä–æ—Ç–∞ –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y:

* **R0 (0¬∞)**

  ```text
  sx' = sx
  sz' = sz
  sy' = sy
  ```

* **R90 (90¬∞)**

  ```text
  sx' =  sz
  sz' = -sx
  sy' =  sy
  ```

* **R180 (180¬∞)**

  ```text
  sx' = -sx
  sz' = -sz
  sy' =  sy
  ```

* **R270 (270¬∞)**

  ```text
  sx' = -sz
  sz' =  sx
  sy' =  sy
  ```

–ü–æ—Å–ª–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è `(sx', sz', sy')`
–ø–æ–ª—É—á–∞–µ–º –Ω–æ–≤—ã–π –æ–∫—Ç–∞–Ω—Ç –ø–æ —Ç–∞–±–ª–∏—Ü–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π (—Å–º. Topology).

---

### **4.2.2. –¢–∞–±–ª–∏—Ü–∞ —Ä–æ—Ç–∞—Ü–∏–π –æ–∫—Ç–∞–Ω—Ç–æ–≤**

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø—Ä—è–º—É—é —Ç–∞–±–ª–∏—Ü—É `Octant √ó Rot ‚Üí Octant`.

**–í–µ—Ä—Ö–Ω–∏–µ –æ–∫—Ç–∞–Ω—Ç—ã (sy = +)**

| Œ∏    | A(+,+,+) | B(-,+,+) | C(-,-,+) | D(+,-,+) |
| ---- | -------- | -------- | -------- | -------- |
| R0   | A        | B        | C        | D        |
| R90  | D        | A        | B        | C        |
| R180 | C        | D        | A        | B        |
| R270 | B        | C        | D        | A        |

**–ù–∏–∂–Ω–∏–µ –æ–∫—Ç–∞–Ω—Ç—ã (sy = ‚àí)**

| Œ∏    | E(+,+,‚àí) | F(-,+,‚àí) | G(-,-,‚àí) | I(+,-,‚àí) |
| ---- | -------- | -------- | -------- | -------- |
| R0   | E        | F        | G        | I        |
| R90  | I        | E        | F        | G        |
| R180 | G        | I        | E        | F        |
| R270 | F        | G        | I        | E        |

–°–≤–æ–π—Å—Ç–≤–∞:

* –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∞ **(A‚ÄìD)** –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–º–µ—à–∏–≤–∞–µ—Ç—Å—è —Å **(E‚ÄìI)**;
* –ø–æ–≤–æ—Ä–æ—Ç ‚Äî —á–∏—Å—Ç–æ–µ ‚Äú–≤—Ä–∞—â–µ–Ω–∏–µ‚Äù –≤–Ω—É—Ç—Ä–∏ –≤–µ—Ä—Ö–Ω–µ–≥–æ –∏–ª–∏ –Ω–∏–∂–Ω–µ–≥–æ –Ω–∞–±–æ—Ä–∞;
* –¥–ª—è –ª—é–±–æ–≥–æ –æ–∫—Ç–∞–Ω—Ç–∞:

  ```text
  rot_oct(rot_oct(oct, Œ∏), Œ∏‚Åª¬π) == oct
  ```

---

### **4.2.3. –°–≤—è–∑—å —Å signed-–≤–µ–∫—Ç–æ—Ä–æ–º**

–û–∫—Ç–∞–Ω—Ç ‚Äî —ç—Ç–æ –ª–∏—à—å —Å–∂–∞—Ç–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è signed-–≤–µ–∫—Ç–æ—Ä–∞.

–î–≤–∞ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ —Ä–æ—Ç–∞—Ü–∏–∏:

1. **–ß–µ—Ä–µ–∑ –∑–Ω–∞–∫–æ–≤—É—é –º–æ–¥–µ–ª—å** (—Ç–∞–±–ª–∏—Ü–∞ –≤—ã—à–µ).

2. **–ß–µ—Ä–µ–∑ signed-–≤–µ–∫—Ç–æ—Ä**:

   * –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –≤–µ–∫—Ç–æ—Ä, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å –æ–∫—Ç–∞–Ω—Ç–æ–º:

     ```text
     v = (sx, sz, sy)
     ```

   * –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –µ–≥–æ –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –≤–µ–∫—Ç–æ—Ä –º–∏—Ä–∞:

     ```text
     v' = rot_world(v, Œ∏)
     ```

   * –±–µ—Ä—ë–º –∑–Ω–∞–∫-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `sign(v')` ‚Üí –Ω–æ–≤—ã–π –æ–∫—Ç–∞–Ω—Ç.

–û–±–∞ —Å–ø–æ—Å–æ–±–∞ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã;
—Ç–∞–±–ª–∏—Ü–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ lookup.

---

## **4.3. –†–æ—Ç–∞—Ü–∏—è Dir6 (–æ—Å–µ–≤—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è)**

Dir6 ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

```text
+X, -X, +Z, -Z, +Y, -Y
```

–ü–æ–≤–æ—Ä–æ—Ç –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y:

* –æ—Å—Ç–∞–≤–ª—è–µ—Ç `+Y / -Y` –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º–∏,
* –≤—Ä–∞—â–∞–µ—Ç `¬±X / ¬±Z` –≤ –ø–ª–æ—Å–∫–æ—Å—Ç–∏ XZ.

### **4.3.1. –¢–∞–±–ª–∏—Ü–∞ —Ä–æ—Ç–∞—Ü–∏–π Dir6**

–ü—É—Å—Ç—å Dir6 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω, –Ω–∞–ø—Ä–∏–º–µ—Ä, enum‚Äô–æ–º:

```rust
enum Dir6 {
    PosX, NegX,
    PosZ, NegZ,
    PosY, NegY,
}
```

–¢–æ–≥–¥–∞:

**R0 (0¬∞)**

```text
PosX ‚Üí PosX
NegX ‚Üí NegX
PosZ ‚Üí PosZ
NegZ ‚Üí NegZ
PosY ‚Üí PosY
NegY ‚Üí NegY
```

**R90**

```text
PosX ‚Üí PosZ
PosZ ‚Üí NegX
NegX ‚Üí NegZ
NegZ ‚Üí PosX

PosY ‚Üí PosY
NegY ‚Üí NegY
```

**R180**

```text
PosX ‚Üí NegX
NegX ‚Üí PosX
PosZ ‚Üí NegZ
NegZ ‚Üí PosZ

PosY ‚Üí PosY
NegY ‚Üí NegY
```

**R270**

```text
PosX ‚Üí NegZ
NegZ ‚Üí NegX
NegX ‚Üí PosZ
PosZ ‚Üí PosX

PosY ‚Üí PosY
NegY ‚Üí NegY
```

–°–≤–æ–π—Å—Ç–≤–∞:

* –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ –º–µ–Ω—è—é—Ç—Å—è;
* –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Ä–∞—â–∞—é—Ç—Å—è –ø–æ —Ç–µ–º –∂–µ –ø—Ä–∞–≤–∏–ª–∞–º,
  —á—Ç–æ –∏ XZ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–µ–∫—Ç–æ—Ä–æ–≤ (—Å–º. 3.1).

---

## **4.4. –†–æ—Ç–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (DirN)**

–î–ª—è –±–æ–ª–µ–µ –ø–ª–æ—Ç–Ω—ã—Ö –Ω–∞–±–æ—Ä–æ–≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, Dir26 ‚Äî –≤—Å–µ —Å–æ—Å–µ–¥–∏ –≤ –≤–æ–∫—Å–µ–ª—å–Ω–æ–π —Ä–µ—à—ë—Ç–∫–µ)
Rotation –Ω–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ.

–û–±—â–∏–π –ø—Ä–∏–Ω—Ü–∏–ø:

1. –õ—é–±–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ signed-–≤–µ–∫—Ç–æ—Ä:

   ```text
   D = (dx, dz, dy) ‚àà ‚Ñ§¬≥
   ```

   (–Ω–∞–ø—Ä–∏–º–µ—Ä, `(-1, 0, +1)` –¥–ª—è –¥–∏–∞–≥–æ–Ω–∞–ª–∏ ‚Äú–≤–ª–µ–≤–æ-–≤–ø–µ—Ä—ë–¥-–≤–≤–µ—Ä—Ö‚Äù).

2. –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–æ–≤–æ—Ä–æ—Ç –∫–∞–∫ –∫ –º–∏—Ä–æ–≤–æ–º—É –≤–µ–∫—Ç–æ—Ä—É:

   ```text
   D' = rot_world(D, Œ∏)
   ```

3. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ–º—É –Ω–∞–±–æ—Ä—É (Dir26/DirN) ‚Äî
   –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è/–∫–≤–∞–Ω—Ç–æ–≤–∞–Ω–∏–µ –ø–æ –ø—Ä–∏–Ω—è—Ç–æ–º—É –ø—Ä–∞–≤–∏–ª—É.

Rotation –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ:

* –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –º–æ–¥–µ–ª—å –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (3.1),
* –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —É–∑–Ω–∞–≤–∞—Ç—å —á—Ç–æ-—Ç–æ –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º DirN,
* –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º –æ—Ç —Ç–æ–≥–æ, —Å–∫–æ–ª—å–∫–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤—ã–±—Ä–∞–ª –¥–≤–∏–∂–æ–∫.

---

## **4.5. –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–æ—Ç–∞—Ü–∏–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π**

–î–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (Octant, Dir6, DirN):

1. **–û–±—Ä–∞—Ç–∏–º–æ—Å—Ç—å**

   ```text
   rot_dir(rot_dir(D, Œ∏), Œ∏‚Åª¬π) == D
   ```

2. **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏**

   –ï—Å–ª–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –∫–∞–∫ –≤–µ–∫—Ç–æ—Ä `v` –∏ –∫–∞–∫ –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã–π —Å–∏–º–≤–æ–ª `D`, —Ç–æ:

   ```text
   rot_world(v, Œ∏) —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç rot_dir(D, Œ∏)
   ```

   (–ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏/–∑–Ω–∞–∫–æ–≤–æ–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏).

3. **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å Topology / Routing**

   * –û–∫—Ç–∞–Ω—Ç –ø–æ—Å–ª–µ —Ä–æ—Ç–∞—Ü–∏–∏ –æ—Å—Ç–∞—ë—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –æ–∫—Ç–∞–Ω—Ç–æ–º A‚ÄìI.
   * Dir6/DirN –æ—Å—Ç–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Å–≤–æ–∏—Ö –º–Ω–æ–∂–µ—Å—Ç–≤.
   * –ú–∞—Ä—à—Ä—É—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Octant –∏–ª–∏ Dir6 –∫–∞–∫ —á–∞—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è,
     –∏–º–µ—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ —ç—Ç–∏–º –ø—Ä–∞–≤–∏–ª–∞–º
     (—Å–º. —Å–ª–µ–¥—É—é—â–∏–µ —Ä–∞–∑–¥–µ–ª—ã –ø—Ä–æ Rotation –¥–ª—è Route).

## **4.6. –°–ø—Ä–∞–≤–æ—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –Ω–∞–±–æ—Ä–æ–≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (Dir6 / Dir18 / Dir26)**

–í –≤–æ–∫—Å–µ–ª—å–Ω–æ–π —Ä–µ—à—ë—Ç–∫–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –Ω–∞–±–æ—Ä–æ–≤ –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

| –ù–∞–±–æ—Ä   | –ö–æ–ª-–≤–æ | –ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç                              | –ò–Ω—Ç—É–∏—Ü–∏—è                                  |
|--------|--------|--------------------------------------------|-------------------------------------------|
| **Dir6**  | 6      | –¢–æ–ª—å–∫–æ –æ—Å–µ–≤—ã–µ —Å–æ—Å–µ–¥–∏: ¬±X, ¬±Y, ¬±Z          | ¬´–ü–æ –≥—Ä–∞–Ω—è–º –∫—É–±–∞¬ª (–æ—Ä—Ç–æ–≥–æ–Ω–∞–ª—å–Ω—ã–µ —à–∞–≥–∏)     |
| **Dir18** | 18     | Dir6 + —Å–æ—Å–µ–¥–∏ –ø–æ —Ä—ë–±—Ä–∞–º                   | ¬´–ì—Ä–∞–Ω–∏ + —Ä—ë–±—Ä–∞¬ª –±–µ–∑ –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã—Ö —É–≥–ª–æ–≤    |
| **Dir26** | 26     | Dir18 + —É–≥–ª–æ–≤—ã–µ —Å–æ—Å–µ–¥–∏ (–ø–æ –≤–µ—Ä—à–∏–Ω–∞–º)      | –ü–æ–ª–Ω–∞—è 3D-—Å–≤—è–∑–Ω–æ—Å—Ç—å –≤–æ–∫—Ä—É–≥ –≤–æ–∫—Å–µ–ª—è       |

–í–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö:

* –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä–∞ `(dx, dz, dy) ‚àà {‚àí1, 0, +1}¬≥`, –∫—Ä–æ–º–µ `(0,0,0)`;
* Rotation –¥–µ–π—Å—Ç–≤—É–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ:
  * –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Üí –≤–µ–∫—Ç–æ—Ä `(dx, dz, dy)`,
  * –ø–æ–≤–æ—Ä–æ—Ç `rot_world(d, Œ∏)` –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y,
  * –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –Ω–∞–±–æ—Ä (Dir6/Dir18/Dir26).

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º–æ–¥–µ–ª—å Rotation –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∂—ë—Å—Ç–∫–æ –∫ –∫–∞–∫–æ–º—É-—Ç–æ –æ–¥–Ω–æ–º—É –Ω–∞–±–æ—Ä—É,
–∞ –∑–∞–¥–∞—ë—Ç –µ–¥–∏–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø–æ–≤–æ—Ä–æ—Ç–∞ –¥–ª—è –ª—é–±—ã—Ö –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –Ω–∞–¥ –≤–æ–∫—Å–µ–ª—å–Ω–æ–π —Ä–µ—à—ë—Ç–∫–æ–π.


---

# **5. –†–æ—Ç–∞—Ü–∏—è Route –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**

–†–∞–∑–¥–µ–ª 5 –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–≤–æ—Ä–æ—Ç—ã
`R0 / R90 / R180 / R270` –¥–µ–π—Å—Ç–≤—É—é—Ç:

* –Ω–∞ **Route** ‚Äî –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å (—Å–º. Routing),
* –Ω–∞ **–ø–æ–∑–∏—Ü–∏—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** –≤ –º–∏—Ä–µ,
* –Ω–∞ **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** (–≤–æ–∫—Å–µ–ª—å–Ω—ã–µ –∫—É–±—ã, —á–∞–Ω–∫–∏ –∏ —Ç.–ø.).

–ó–¥–µ—Å—å Rotation —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–æ—Å—Ç–æ–º:

> –º–µ–∂–¥—É **–º–∏—Ä–æ–≤—ã–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ XYZ**,
> **—Ç–æ–ø–æ–ª–æ–≥–∏–µ–π** (Region/Block/Chunk/Octo/Voxel)
> –∏ **–¥–∞–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**.

---

## **5.1. –ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è Route (—á–µ—Ä–µ–∑ XYZ)**

–ë–∞–∑–æ–≤–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ—Ç–∞—Ü–∏–∏ Route –¥–∞—ë—Ç—Å—è **—á–µ—Ä–µ–∑ –º–∏—Ä–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã**.

–ü—É—Å—Ç—å –µ—Å—Ç—å Route:

```text
Route {
    region: (rx, rz, ry),
    octant: Octant,
    block:  Option<BlockCoord>,
    chunk:  Option<ChunkCoord>,
    octo:   Option<OctoCoord>,
    voxel:  Option<VoxelCoord>,
}
```

–¢–æ–≥–¥–∞ **–∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è Route** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ —Ç—Ä–∏ —à–∞–≥–∞:

1. **Decode: Route ‚Üí XYZ**

   –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–æ—Ä–º—É–ª—ã –∏–∑ Topology/—Ñ–æ—Ä–º—É–ª—ã –ø–µ—Ä–µ—Ö–æ–¥–æ–≤:

   ```text
   (X, Z, Y) = route_to_xyz(route)
   ```

2. **Rotate: XYZ ‚Üí XYZ'**

   –ü—Ä–∏–º–µ–Ω—è–µ–º –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y (—Å–º. 3.1):

   ```text
   (X', Z', Y') = rot_world((X, Z, Y), Œ∏)
   ```

3. **Encode: XYZ' ‚Üí Route'**

   –û–±—Ä–∞—Ç–Ω–æ —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞–µ–º –º–∏—Ä–æ–≤—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É –≤ —Ç–æ–ø–æ–ª–æ–≥–∏—é (—Å–º. Topology/–æ–±—Ä–∞—Ç–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã):

   ```text
   route' = xyz_to_route(X', Z', Y')
   ```

–û–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ:

```text
route' = rot_route_world(route, Œ∏)
```

–°–≤–æ–π—Å—Ç–≤–∞:

* Route' **–≤—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–µ–Ω** —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ç–æ–ø–æ–ª–æ–≥–∏–∏;
* —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Ä–æ–≤–Ω–µ–π (`Region/Block/Chunk/...`) —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è;
* –≤—Å–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã Routing –æ—Å—Ç–∞—é—Ç—Å—è –∏—Å—Ç–∏–Ω–Ω—ã–º–∏;
* –æ–ø–µ—Ä–∞—Ü–∏—è **–æ–±—Ä–∞—Ç–∏–º–∞**:

  ```text
  rot_route_world(rot_route_world(route, Œ∏), Œ∏‚Åª¬π) == route
  ```

–≠—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ‚Äî **–∫–∞–Ω–æ–Ω**:
–ª—é–±–∞—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (—á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å—ã, —Ç–∞–±–ª–∏—Ü—ã, Morton –∏ —Ç.–ø.)
–¥–æ–ª–∂–Ω–∞ –¥–∞–≤–∞—Ç—å —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —á—Ç–æ –∏ —Ü–µ–ø–æ—á–∫–∞ `Route ‚Üí XYZ ‚Üí Rotation ‚Üí Route`.

---

## **5.2. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (Route –∫–∞–∫ —è–∫–æ—Ä—å)**

–ß–∞—Å—Ç—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:

* Route –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ **—è–∫–æ—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**
  (–Ω–∞–ø—Ä–∏–º–µ—Ä, Chunk/Block/Region –∏–ª–∏ –±—É–¥—É—â–∏–π DYN-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä),
* —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö/–∏–Ω–¥–µ–∫—Å–∞—Ö,
* –Ω—É–∂–Ω–æ –ø–æ–≤–µ—Ä–Ω—É—Ç—å **—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É**,
  –Ω–µ –º–µ–Ω—è—è –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é Route.

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ:

* **Route –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º**;
* –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –≤—Ä–∞—â–∞—é—Ç—Å—è –ø–æ `rot_local(...)` (—Å–º. 3.2).

–ü—Ä–∏–º–µ—Ä: –ø–æ–≤–æ—Ä–æ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ Chunk –ø—Ä–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º Route —á–∞–Ω–∫–∞:

```text
// Route —á–∞–Ω–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–µ–º –∂–µ
chunk_route' = chunk_route

// –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤–æ–∫—Å–µ–ª—è:
(vx, vz, vy)   ‚Üí (vx', vz', vy') = rot_local(vx, vz, vy, Œ∏; N = 64)
```

–°–≤–æ–π—Å—Ç–≤–∞:

* –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äú—Å—Ç–æ–∏—Ç –Ω–∞ –º–µ—Å—Ç–µ‚Äù –≤ –º–∏—Ä–æ–≤–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ;
* –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –≥–µ–æ–º–µ—Ç—Ä–∏—è –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Å–≤–æ–µ–≥–æ –æ–±—ä—ë–º–∞;
* –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ –∂–µ —Ñ–æ—Ä–º—É–ª—ã, —á—Ç–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (3.2 / 3.3).

–¢–∞–∫–æ–π —Ä–µ–∂–∏–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

* –ø–æ–≤–æ—Ä–æ—Ç–∞ –±–ª—é–ø—Ä–∏–Ω—Ç–æ–≤/—Å—Ç—Ä—É–∫—Ç—É—Ä –≤–Ω—É—Ç—Ä–∏ –∑–∞—Ä–∞–Ω–µ–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —á–∞–Ω–∫–∞/–±–ª–æ–∫–∞,
* –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –±–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –º–∏—Ä–µ,
* —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã—Ö –≤–∞—Ä–∏–∞—Ü–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

---

## **5.3. –ü–æ–∑–∏—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ vs —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ: –¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–ª–æ—è**

–í–∞–∂–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–∞ —Ä–æ—Ç–∞—Ü–∏–∏:

1. **–†–æ—Ç–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –º–∏—Ä–µ**
   (–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —á–∞–Ω–∫–∞/–±–ª–æ–∫–∞/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–∞–∫ —Ü–µ–ª–æ–≥–æ):

   * Route –≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ –ø—Ä–∞–≤–∏–ª—É `rot_route_world(route, Œ∏)`,
   * –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–∂–µ—Ç *–æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –∫–∞–∫ –µ—Å—Ç—å*.

   –≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ ‚Äú–º—ã –ø–µ—Ä–µ–Ω–µ—Å–ª–∏ —ç—Ç—É –∂–µ –≥–µ–æ–º–µ—Ç—Ä–∏—é –≤ –¥—Ä—É–≥—É—é –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –º–∏—Ä–∞‚Äù.

2. **–†–æ—Ç–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**
   (–ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏):

   * Route –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è,
   * –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –≤—Ä–∞—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `rot_local`.

–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏:

```text
// –í–∞—Ä–∏–∞–Ω—Ç A: –ø–æ–≤–µ—Ä–Ω—É—Ç—å ‚Äú–∫—É–¥–∞ —Å–º–æ—Ç—Ä–∏—Ç‚Äù –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–µ–≥–æ –ø–æ–∑–∏—Ü–∏—é)
route_world_rotated = rot_route_world(route, Œ∏)

// –í–∞—Ä–∏–∞–Ω—Ç B: –ø–æ–≤–µ—Ä–Ω—É—Ç—å ‚Äú—á—Ç–æ –≤–Ω—É—Ç—Ä–∏‚Äù (–≥–µ–æ–º–µ—Ç—Ä–∏—é)
data_rotated_by_local_indices(...)
```

–û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –º–æ–≥—É—Ç –±—ã—Ç—å **—Å–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω—ã**:

* —Å–Ω–∞—á–∞–ª–∞ –ø–æ–≤–µ—Ä–Ω—É–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ,
* –ø–æ—Ç–æ–º –ø–µ—Ä–µ–Ω–µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –Ω–æ–≤–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ (–∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç),
* –ø—Ä–∏ —ç—Ç–æ–º –æ–±–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–ø–∏—Ä–∞—é—Ç—Å—è –Ω–∞ –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ Œ∏ –∏ —Ç–µ –∂–µ —Ñ–æ—Ä–º—É–ª—ã.

---

## **5.4. –†–æ—Ç–∞—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Ç–æ–ø–æ–ª–æ–≥–∏–∏**

–ò—Å–ø–æ–ª—å–∑—É—è 3.2 –∏ 5.2, —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –º–æ–¥–µ–ª—å —Ä–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

### **5.4.1. VoxelRange (–ª–æ–∫–∞–ª—å–Ω—ã–π –∫—É–±)**

–õ—é–±–æ–π –∫—É–±–æ–≤—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –≤–æ–∫—Å–µ–ª–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `32√ó32√ó32` –∏–ª–∏ `64√ó64√ó64`)
–≤—Ä–∞—â–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `rot_local`:

```text
for each (vx, vz, vy) in [0..N) √ó [0..N) √ó [0..H):
    (vx', vz', vy') = rot_local(vx, vz, vy, Œ∏; N)
```

–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:

* –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã,
* —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –≥–µ–æ–º–µ—Ç—Ä–∏–∏,
* –º–∏–Ω–∏-—à–∞–±–ª–æ–Ω—ã –≤–Ω—É—Ç—Ä–∏ —á–∞–Ω–∫–∞/–æ–∫—Ç–æ—á–∞–Ω–∫–∞.

---

### **5.4.2. Octochunk**

Octochunk —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ `N√óN√óN` –≤–æ–∫—Å–µ–ª–µ–π (N=32 –ø–æ –∫–∞–Ω–æ–Ω—É)
–∏ —Å–∞–º —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ `2√ó2√ó2` –ø–æ–¥-—á–∞–Ω–∫–æ–≤.

**–ü–æ–≤–æ—Ä–æ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ Octochunk:**

* Route Octochunk —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω,
* –ø—Ä–∏–º–µ–Ω—è–µ–º `rot_local` –∫ –≤–æ–∫—Å–µ–ª—è–º –≤–Ω—É—Ç—Ä–∏.

**–ü–æ–≤–æ—Ä–æ—Ç –ø–æ–∑–∏—Ü–∏–∏ Octochunk –≤–Ω—É—Ç—Ä–∏ Chunk:**

* Route —á–∞–Ω–∫–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω,
* –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ `(ox, oz, oy)` –º–µ–Ω—è–µ—Ç—Å—è:

  ```text
  (ox', oz', oy') = rot_local(ox, oz, oy, Œ∏; N = 2)
  ```

---

### **5.4.3. Chunk**

Chunk –≤–∫–ª—é—á–∞–µ—Ç:

* **–ø–æ–∑–∏—Ü–∏—é** –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ `(cx, cz, cy)` (N=8),
* **—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ** ‚Äî –≤–æ–∫—Å–µ–ª—å–Ω—ã–π –æ–±—ä—ë–º `64√ó64√ó64` (–ø–æ –∫–∞–Ω–æ–Ω—É).

**–ü–æ–≤–æ—Ä–æ—Ç –ø–æ–∑–∏—Ü–∏–∏ —á–∞–Ω–∫–∞ –≤–Ω—É—Ç—Ä–∏ Block:**

```text
(cx', cz', cy') = rot_local(cx, cz, cy, Œ∏; N = 8)
```

**–ü–æ–≤–æ—Ä–æ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —á–∞–Ω–∫–∞:**

```text
(vx', vz', vy') = rot_local(vx, vz, vy, Œ∏; N = 64)
```

---

### **5.4.4. Block –∏ Region (–ø–æ XZ)**

Block:

* –ø–æ–∑–∏—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ Region –ø–æ XZ:

  ```text
  (bx', bz') = rot_local(bx, bz, Œ∏; N = 8)
  by'        = by
  ```

Region-local:

* –µ—Å–ª–∏ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é Region-—Å–µ—Ç–∫—É `[0..REGION_SIZE_XZ)` –ø–æ XZ,
  –∫ –Ω–µ–π –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω—ë–Ω —Ç–æ—Ç –∂–µ `rot_local` (—Å N = REGION_SIZE_XZ),
  –∫–æ–≥–¥–∞ —Ä–µ—á—å –∏–¥—ë—Ç –æ **—Ä–æ—Ç–∞—Ü–∏–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –≤–Ω—É—Ç—Ä–∏ —Ä–µ–≥–∏–æ–Ω–∞**.

**–í–∞–∂–Ω–æ:** –ø—Ä–∏ –ø–æ–ª–Ω–æ–π —Ä–æ—Ç–∞—Ü–∏–∏ Route (5.1)
–ø–µ—Ä–µ—Å—á—ë—Ç —Ä–µ–≥–∏–æ–Ω–æ–≤ –∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–¥—ë—Ç —á–µ—Ä–µ–∑ XYZ,
–∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `rot_local` ‚Äî —ç—Ç–æ –¥–∞—ë—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π —Å–µ—Ç–∫–µ.

---

## **5.5. –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–æ—Ç–∞—Ü–∏–∏ Route –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**

–î–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏–∑ —ç—Ç–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞.

### **5.5.1. Route ‚Üî XYZ**

–ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è Route –≤—Å–µ–≥–¥–∞ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç:

```text
route' = rot_route_world(route, Œ∏)

decode(encode(route')) == route'
```

–∏

```text
rot_route_world(rot_route_world(route, Œ∏), Œ∏‚Åª¬π) == route
```

–ì–¥–µ `encode/decode` ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏ Topology/ Routing –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ Route ‚áÑ XYZ.

---

### **5.5.2. –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–π –∏ –º–∏—Ä–æ–≤–æ–π —Ä–æ—Ç–∞—Ü–∏–∏**

–ï—Å–ª–∏:

* –º—ã –¥–µ–∫–æ–¥–∏—Ä—É–µ–º Route –≤ XYZ,
* –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º XYZ,
* –∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º –µ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ –≤ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤,

—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç **—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–µ–Ω** –ø–æ —Å–º—ã—Å–ª—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

* `rot_local` –Ω–∞ —É—Ä–æ–≤–Ω—è—Ö (Voxel / Octo / Chunk / Block),
* –ø–ª—é—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç Region/Octant.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

* –≤—ã–±–∏—Ä–∞—Ç—å —É–¥–æ–±–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (—á–µ—Ä–µ–∑ Route / —á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å—ã),
* –Ω–µ —Ç–µ—Ä—è—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏.

---

### **5.5.3. –ù–µ–ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–Ω–æ—Å—Ç—å –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ Topology / Routing**

–ù–∏ –æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è Rotation:

* –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ —É—Ä–æ–≤–Ω–µ–π,
* –Ω–µ –≤–≤–æ–¥–∏—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã,
* –Ω–µ –Ω–∞—Ä—É—à–∞–µ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∏–Ω–¥–µ–∫—Å–æ–≤,
* –Ω–µ —Ä–∞–∑—Ä—É—à–∞–µ—Ç –±–∏–µ–∫—Ü–∏—é Route ‚áÑ XYZ.

Rotation ‚Äî —á–∏—Å—Ç—ã–π **—Å–ª–æ–π –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏**,
–∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ –∑–∞–¥–∞–Ω–Ω—É—é —Ç–æ–ø–æ–ª–æ–≥–∏—é –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é,
–Ω–æ **–Ω–µ –º–µ–Ω—è–µ—Ç –∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä—É**.

---

# **6. –ò—Ç–æ–≥ —Ä–∞–∑–¥–µ–ª–∞ Rotation**

–†–∞–∑–¥–µ–ª Rotation –∑–∞–¥–∞—ë—Ç **–µ–¥–∏–Ω—ã–π, —Å—Ç—Ä–æ–≥–∏–π –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø–æ–≤–æ—Ä–æ—Ç–æ–≤** –¥–ª—è –≤—Å–µ–≥–æ –¥–≤–∏–∂–∫–∞.
–û–Ω –Ω–µ –º–µ–Ω—è–µ—Ç —Ç–æ–ø–æ–ª–æ–≥–∏—é –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é, –∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç, **–∫–∞–∫ –∏—Ö –æ–±—ä–µ–∫—Ç—ã –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ**.

---

## **6.1. –ß—Ç–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –º–æ–¥–µ–ª—å—é Rotation**

1. **–ì—Ä—É–ø–ø–∞ –ø–æ–≤–æ—Ä–æ—Ç–æ–≤**

   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω–µ—á–Ω–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–≤–æ—Ä–æ—Ç–æ–≤ –≤–æ–∫—Ä—É–≥ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Å–∏:

   ```text
   Rot = { R0, R90, R180, R270 }
   ```

   –≠—Ç–æ –¥–∏—Å–∫—Ä–µ—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞ C4 —Å –æ–±—ã—á–Ω–æ–π –∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π –ø–æ–≤–æ—Ä–æ—Ç–æ–≤ –∏ –æ–±—Ä–∞—Ç–∏–º—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏.

2. **–û—Å—å Y ‚Äî –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–∞—è**

   * –ü–æ–≤–æ—Ä–æ—Ç—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã **—Å—Ç—Ä–æ–≥–æ –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y**.
   * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Y –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π **–Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è**.
   * –í—Ä–∞—â–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–ª–æ—Å–∫–æ—Å—Ç—å XZ.

3. **–ü–æ—Ä—è–¥–æ–∫ –æ—Å–µ–π**

   –í–µ–∑–¥–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–Ω–æ–Ω:

   ```text
   x | z | y
   ```

   Rotation –Ω–µ –≤–≤–æ–¥–∏—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, –∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç—Ä–æ–≥–æ –ø–æ–≤–µ—Ä—Ö —ç—Ç–æ–π.

---

## **6.2. –°–≤—è–∑—å —Å Topology –∏ Routing**

Rotation –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ:

* **Topology**:

  * –∏–µ—Ä–∞—Ä—Ö–∏—è `Region ‚Üí Block ‚Üí Chunk ‚Üí Octochunk ‚Üí Voxel`,
  * –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ —Å—Ç—Ä–∞–π–¥—ã,
  * –º–æ–¥–µ–ª—å –æ–∫—Ç–∞–Ω—Ç–æ–≤ –∏ –∑–Ω–∞–∫–æ–≤.

* **Routing**:

  * Route –∫–∞–∫ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å,
  * –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã Route ‚áÑ XYZ,
  * –º–∞—Å–∫–∏ —É—Ä–æ–≤–Ω–µ–π –∏ —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã.

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:

1. **–†–æ—Ç–∞—Ü–∏—è Route —á–µ—Ä–µ–∑ XYZ ‚Äî –∫–∞–Ω–æ–Ω**

   –õ—é–±–∞—è ‚Äú–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è‚Äù —Ä–æ—Ç–∞—Ü–∏—è Route –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ü–µ–ø–æ—á–∫–æ–π:

   ```text
   Route ‚Üí XYZ ‚Üí rot_world(Œ∏) ‚Üí XYZ' ‚Üí Route'
   ```

   –õ—é–±–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (—á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å—ã, —Ç–∞–±–ª–∏—Ü—ã, Morton –∏ —Ç.–¥.)
   –æ–±—è–∑–∞–Ω–∞ –±—ã—Ç—å —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–∞ —ç—Ç–æ–º—É –∫–∞–Ω–æ–Ω—É.

2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è**

   Rotation:

   * –Ω–µ –º–µ–Ω—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ —É—Ä–æ–≤–Ω–µ–π,
   * –Ω–µ –Ω–∞—Ä—É—à–∞–µ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∏–Ω–¥–µ–∫—Å–æ–≤,
   * –Ω–µ –≤–≤–æ–¥–∏—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã,
   * –Ω–µ —Ä–∞–∑—Ä—É—à–∞–µ—Ç –±–∏–µ–∫—Ü–∏—é Route ‚áÑ XYZ.

   –û–Ω —Ç–æ–ª—å–∫–æ **–º–µ–Ω—è–µ—Ç –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é** –≤ —Ä–∞–º–∫–∞—Ö —É–∂–µ –∑–∞–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

---

## **6.3. –£—Ä–æ–≤–Ω–∏, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –¥–µ–π—Å—Ç–≤—É–µ—Ç Rotation**

Rotation –æ–ø–∏—Å–∞–Ω –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ –¥–ª—è —Ç—Ä—ë—Ö —Å–ª–æ—ë–≤:

1. **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (world-space XYZ)**

   * signed-–≤–µ–∫—Ç–æ—Ä–∞ `(X, Z, Y) ‚àà ‚Ñ§¬≥ / ‚Ñù¬≥`,
   * —Ñ–∏–∑–∏–∫–∞, –Ω–∞–≤–∏–≥–∞—Ü–∏—è, –∫–∞–º–µ—Ä—ã, raycast.

2. **–¢–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–∏–Ω–¥–µ–∫—Å—ã ‚â• 0)**

   * `(vx, vz, vy)`, `(ox, oz, oy)`, `(cx, cz, cy)` –∏ —Ç.–¥.,
   * –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —á–µ—Ä–µ–∑ `rot_local`,
   * –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É.

3. **–õ–æ–∫–∞–ª—å–Ω—ã–µ float-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**

   * `(x_f, z_f, y_f) ‚àà [0..N)√ó[0..N)√ó[0..H)`,
   * —Ç–∞ –∂–µ –≥–µ–æ–º–µ—Ç—Ä–∏—è –ø–æ–≤–æ—Ä–æ—Ç–∞, —á—Ç–æ –∏ –¥–ª—è –∏–Ω–¥–µ–∫—Å–æ–≤, –Ω–æ –≤ float‚Äô–∞—Ö.

–û—Ç–¥–µ–ª—å–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è:

* **–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π**:

  * –æ–∫—Ç–∞–Ω—Ç—ã A‚ÄìI,
  * Dir6 (¬±X, ¬±Z, ¬±Y),
  * –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ DirN —á–µ—Ä–µ–∑ rot_world + –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é;

* **Route –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**:

  * –ø–æ–≤–æ—Ä–æ—Ç –ø–æ–∑–∏—Ü–∏–∏ Route –≤ –º–∏—Ä–µ,
  * –ø–æ–≤–æ—Ä–æ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º Route,
  * –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–±–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è.

---

## **6.4. –ë–∞–∑–∞ –¥–ª—è DUN-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ —Å–ª–æ–∂–Ω—ã—Ö —Ñ–∏–≥—É—Ä**

–•–æ—Ç—è —Å–∞–º —Ä–∞–∑–¥–µ–ª Rotation **–Ω–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç** Dynamic Unit Node-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –æ–Ω –¥–∞—ë—Ç –∏–º –≥–æ—Ç–æ–≤—É—é –±–∞–∑—É:

1. **–Ø–∫–æ—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**

   * DUN-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–µ—Ç –∏–º–µ—Ç—å Route (Region/Block/Chunk/‚Ä¶),
   * –µ–≥–æ *–ø–æ–∑–∏—Ü–∏—è –≤ –º–∏—Ä–µ* –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `rot_route_world`.

2. **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ**

   * –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ–∏–≥—É—Ä–∞/–≤–æ–∫—Å–µ–ª—å–Ω—ã–π –æ–±—ä—ë–º –∂–∏–≤—É—Ç –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö,
   * –∫ –Ω–∏–º –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è `rot_local` –∏–ª–∏ rot_world –¥–ª—è float.

3. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**

   * –º–æ–∂–Ω–æ –∫—Ä—É—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —è–∫–æ—Ä—å (–º–µ–Ω—è–µ–º –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –≤ –º–∏—Ä–µ),
   * –º–æ–∂–Ω–æ –∫—Ä—É—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (—Å–º–µ–Ω–∞ —Ñ–æ—Ä–º—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞),
   * –º–æ–∂–Ω–æ –∫—Ä—É—Ç–∏—Ç—å –æ–±–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ Œ∏.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, Rotation —É–∂–µ –∑–∞–¥–∞—ë—Ç:

> –µ–¥–∏–Ω—ã–π ‚Äú—è–∑—ã–∫ –ø–æ–≤–æ—Ä–æ—Ç–æ–≤‚Äù –¥–ª—è –±—É–¥—É—â–∏—Ö DUN-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
> –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–µ–Ω—è—Ç—å —Ç–æ–ø–æ–ª–æ–≥–∏—é –∏–ª–∏ routing.

---

## **6.5. –ö–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

–î–ª—è –ª—é–±–æ–≥–æ –º–æ–¥—É–ª—è –¥–≤–∏–∂–∫–∞, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–≥–æ Rotation (DTO, HAOS, LOD/SVO, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, ECS, —Ä–µ–Ω–¥–µ—Ä, —Ä–µ–¥–∞–∫—Ç–æ—Ä), –¥–µ–π—Å—Ç–≤—É—é—Ç –æ–±—â–∏–µ —É—Å–ª–æ–≤–∏—è:

1. **–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ—Å—Ç—å –∫–∞–Ω–æ–Ω—É**

   –õ—é–±–æ–µ —É—Å–∫–æ—Ä–µ–Ω–Ω–æ–µ/—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ä–æ—Ç–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ:

   ```text
   Route ‚Üí XYZ ‚Üí rot_world(Œ∏) ‚Üí XYZ' ‚Üí Route'
   ```

2. **–û–±—Ä–∞—Ç–∏–º–æ—Å—Ç—å**

   –î–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π:

   ```text
   rot(rot(T, Œ∏), Œ∏‚Åª¬π) == T
   ```

   –≥–¥–µ T ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, Route, –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å.

3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤**

   –í—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ—Å–ª–µ —Ä–æ—Ç–∞—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–∞—Ö —É—Ä–æ–≤–Ω—è.

4. **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å–ª–æ—ë–≤**

   –†–æ—Ç–∞—Ü–∏—è:

   * –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π ‚Üî –≤–µ–∫—Ç–æ—Ä–æ–≤,
   * –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ ‚Üî Route ‚Üî XYZ,
   * –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ ‚Üî –∏—Ö —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

   –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–π –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–π.

---

**–ò—Ç–æ–≥ –ø–æ Rotation**

–ú—ã –ø–æ–ª—É—á–∏–ª–∏:

* –∫–æ–º–ø–∞–∫—Ç–Ω—É—é, –¥–∏—Å–∫—Ä–µ—Ç–Ω—É—é –º–æ–¥–µ–ª—å –ø–æ–≤–æ—Ä–æ—Ç–æ–≤ –≤–æ–∫—Ä—É–≥ Y (C4),
* —Ñ–æ—Ä–º—É–ª—ã –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π,
* –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫—É—é —Ä–æ—Ç–∞—Ü–∏—é Route –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤,
* –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å Topology –∏ Routing,
* –ø—Ä–æ—á–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è DYN-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ –±–ª—é–ø—Ä–∏–Ω—Ç–æ–≤.

–ù–∞ —ç—Ç–æ–º **—Ç—Ä–∏–∞–¥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**:

* Topology,
* Routing,
* Rotation

—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ü–µ–ª—å–Ω—ã–π –º–∞—Ç-—Å–ª–æ–π –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞:
*–∫–∞–∫ –º–∏—Ä –¥–µ–ª–∏—Ç—Å—è, –∞–¥—Ä–µ—Å—É–µ—Ç—Å—è –∏ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è.*

---

[üìö –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥](./README.md)

[üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–æ—Ä—Ç–∞–ª –ø—Ä–æ–µ–∫—Ç–∞](../../ARCHITECTURE/readme.md)  
