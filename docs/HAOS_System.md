Arden — HAOS System
Управление жизненным циклом секторов

Статус: Draft
Цель: определить роли и минимальные правила для диспетчера внимания.

1. Назначение

HAOS управляет состояниями Attention Sectors: Active, Partial, Sleep, DTO Archive.
Задача — пересчитывать только то, что влияет на игрока, и удерживать стабильный FPS.

2. Зоны ответственности

Определение активной зоны вокруг игрока/камеры.

Распределение состояний по секторам (Active/Partial/Sleep/DTO).

Планирование перегенерации мешей и обновления физики.

Постановка задач сериализации в DTO и восстановление из DTO.

Лимиты на операции в кадр и бюджет времени (time slicing).

3. Базовые правила (MVP)

Центральный сектор относительно игрока: Active.

Соседние сектора: Partial с прокси-физикой.

Дальние: Sleep, затем перевод в DTO Archive.

При смене состояний изменяются только граничные области данных.

Любая массовая операция дробится на порции.

4. Взаимодействие с подсистемами

Voxel Layer: запрос на перегенерацию мешей по событиям.

Vector Layer: включение/отключение прокси-коллайдеров по состоянию сектора.

DTO System: постановка задач Save/Load с приоритетами.

rDTO (если включён): делегирование локальных решений в пределах политики HAOS.

5. Контроль производительности

Целевой кадр: фиксированная бюджетная доля под фоновые задачи (например, не более X мс).

Очереди: отдельные очереди для рендера, физики, DTO.

Приоритеты: центральный сектор > соседние > дальние > архив.

6. Диагностика и телеметрия

Лог статусов секторов и длительностей операций.

Счётчики: количество перегенераций, объём DTO, пропущенные бюджеты.

Карантин: проблемы с валидацией/миграцией DTO отмечаются и исключаются из активной зоны до ручной проверки.

7. Расширение в будущем

Политики для сетевой игры (клиент/сервер).

Предиктивная активация по траектории игрока.

Тонкая настройка профилей производительности.
